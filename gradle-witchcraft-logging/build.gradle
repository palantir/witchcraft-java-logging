apply plugin: 'groovy'
apply plugin: 'java-gradle-plugin'
apply plugin: 'com.palantir.external-publish-jar'
apply plugin: 'com.palantir.external-publish-gradle-plugin'

dependencies {
    api gradleApi()
    implementation project(':witchcraft-logging-formatting')
    implementation 'com.google.guava:guava'

    testImplementation gradleTestKit()
    testImplementation 'com.google.guava:guava'
    testImplementation 'com.netflix.nebula:nebula-test'
    testImplementation 'org.assertj:assertj-core'
    testImplementation 'org.mockito:mockito-core'
    testImplementation 'org.mockito:mockito-junit-jupiter'
    testImplementation 'org.junit.jupiter:junit-jupiter'

    testRuntimeOnly 'org.junit.vintage:junit-vintage-engine'
}

gradlePlugin {
    plugins {
        witchcraftLoggingPlugin {
            displayName = 'Palantir Witchcraft Logging Plugin'
            id = 'com.palantir.witchcraft-logging'
            implementationClass = 'com.palantir.witchcraft.java.logging.gradle.WitchcraftLoggingPlugin'
        }
        witchcraftLoggingIdeaPlugin {
            displayName = 'Palantir Witchcraft Logging Idea Plugin'
            id = 'com.palantir.witchcraft-logging-idea'
            implementationClass = 'com.palantir.witchcraft.java.logging.gradle.idea.IdeaPluginRecommenderPlugin'
        }
        witchcraftLoggingTestReportPlugin {
            displayName = 'Palantir Witchcraft Logging Test Report Rendering Plugin'
            id = 'com.palantir.witchcraft-logging-testreport'
            implementationClass = 'com.palantir.witchcraft.java.logging.gradle.testreport.TestReportFormattingPlugin'
        }
    }
}

pluginBundle {
    website = 'https://github.com/palantir/witchcraft-java-logging'
    vcsUrl = 'https://github.com/palantir/witchcraft-java-logging'
    description = 'Palantir Witchcraft logging plugins used to improve developer experience building, running, and debugging applications using the witchcraft logging api: https://github.com/palantir/witchcraft-api.'
    tags = ['witchcraft', 'logging', 'idea']
}
